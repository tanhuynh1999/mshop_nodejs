Vue.component('w-ckeditor-vue', window['w-ckeditor-vue'])
var Main = {
    data() {
        return {
            tableData: [{
                _id: '123321123abc',
                code: 'LBS-1',
                name: 'SET BỘ LỬNG BÒ SỮA SIÊU YÊU ',
                view: 1,
                image: 'https://scontent.fsgn3-1.fna.fbcdn.net/v/t39.30808-6/p180x540/237144537_199268612258235_1694052261319163521_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=730e14&_nc_ohc=fa3MvbtAvtMAX-AAi4O&_nc_ht=scontent.fsgn3-1.fna&oh=f1fa74f329078c9dff5634616a883cb7&oe=61569E70',
                describe: 'Sau một ngày làm việc căng thẳng, về nhà và thay một bộ đồ xinh xắn có thể làm giải tỏa mọi mệt mỏi, muộn phiền đó ạ. Không tin bạn thử mà xem',
                content: 'Cùng hòa nhịp con tim với hot trend set bộ lửng bò sữa của Quần áo thêu đẹp ngay nha, Đồ bộ bò sữa rất đẹp mát mặc ở nhà hay dạo phố đều rất hợp lý luôn ạ!',
                price: '140000',
                percentDiscount: 0,
                follow: false,
                note: false,
                bin: false,
                active: true,
                dateCreate: '27-9-2021 lúc 6:37',
                dateModified: '27-9-2021 lúc 6:37',
                userCreate: 'tan.hm',
                userModified: 'tan.hm'
            }, {
                _id: '123321123abc',
                code: 'LBS-1',
                name: 'SET BỘ LỬNG BÒ SỮA SIÊU YÊU ',
                view: 1,
                image: 'https://scontent.fsgn3-1.fna.fbcdn.net/v/t39.30808-6/p180x540/237144537_199268612258235_1694052261319163521_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=730e14&_nc_ohc=fa3MvbtAvtMAX-AAi4O&_nc_ht=scontent.fsgn3-1.fna&oh=f1fa74f329078c9dff5634616a883cb7&oe=61569E70',
                describe: 'Sau một ngày làm việc căng thẳng, về nhà và thay một bộ đồ xinh xắn có thể làm giải tỏa mọi mệt mỏi, muộn phiền đó ạ. Không tin bạn thử mà xem',
                content: 'Cùng hòa nhịp con tim với hot trend set bộ lửng bò sữa của Quần áo thêu đẹp ngay nha, Đồ bộ bò sữa rất đẹp mát mặc ở nhà hay dạo phố đều rất hợp lý luôn ạ!',
                price: '140000',
                percentDiscount: 0,
                follow: false,
                note: false,
                bin: false,
                active: true,
                dateCreate: '27-9-2021 lúc 6:37',
                dateModified: '27-9-2021 lúc 6:37',
                userCreate: 'tan.hm',
                userModified: 'tan.hm'
            }, {
                _id: '123321123abc',
                code: 'LBS-1',
                name: 'SET BỘ LỬNG BÒ SỮA SIÊU YÊU ',
                view: 1,
                image: 'https://scontent.fsgn3-1.fna.fbcdn.net/v/t39.30808-6/p180x540/237144537_199268612258235_1694052261319163521_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=730e14&_nc_ohc=fa3MvbtAvtMAX-AAi4O&_nc_ht=scontent.fsgn3-1.fna&oh=f1fa74f329078c9dff5634616a883cb7&oe=61569E70',
                describe: 'Sau một ngày làm việc căng thẳng, về nhà và thay một bộ đồ xinh xắn có thể làm giải tỏa mọi mệt mỏi, muộn phiền đó ạ. Không tin bạn thử mà xem',
                content: 'Cùng hòa nhịp con tim với hot trend set bộ lửng bò sữa của Quần áo thêu đẹp ngay nha, Đồ bộ bò sữa rất đẹp mát mặc ở nhà hay dạo phố đều rất hợp lý luôn ạ!',
                price: '140000',
                percentDiscount: 0,
                follow: false,
                note: false,
                bin: false,
                active: true,
                dateCreate: '27-9-2021 lúc 6:37',
                dateModified: '27-9-2021 lúc 6:37',
                userCreate: 'tan.hm',
                userModified: 'tan.hm'
            }, {
                _id: '123321123abc',
                code: 'LBS-1',
                name: 'SET BỘ LỬNG BÒ SỮA SIÊU YÊU ',
                view: 1,
                image: 'https://scontent.fsgn3-1.fna.fbcdn.net/v/t39.30808-6/p180x540/237144537_199268612258235_1694052261319163521_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=730e14&_nc_ohc=fa3MvbtAvtMAX-AAi4O&_nc_ht=scontent.fsgn3-1.fna&oh=f1fa74f329078c9dff5634616a883cb7&oe=61569E70',
                describe: 'Sau một ngày làm việc căng thẳng, về nhà và thay một bộ đồ xinh xắn có thể làm giải tỏa mọi mệt mỏi, muộn phiền đó ạ. Không tin bạn thử mà xem',
                content: 'Cùng hòa nhịp con tim với hot trend set bộ lửng bò sữa của Quần áo thêu đẹp ngay nha, Đồ bộ bò sữa rất đẹp mát mặc ở nhà hay dạo phố đều rất hợp lý luôn ạ!',
                price: '140000',
                percentDiscount: 0,
                follow: false,
                note: false,
                bin: false,
                active: true,
                dateCreate: '27-9-2021 lúc 6:37',
                dateModified: '27-9-2021 lúc 6:37',
                userCreate: 'tan.hm',
                userModified: 'tan.hm'
            }, {
                _id: '123321123abc',
                code: 'LBS-1',
                name: 'SET BỘ LỬNG BÒ SỮA SIÊU YÊU ',
                view: 1,
                image: 'https://scontent.fsgn3-1.fna.fbcdn.net/v/t39.30808-6/p180x540/237144537_199268612258235_1694052261319163521_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=730e14&_nc_ohc=fa3MvbtAvtMAX-AAi4O&_nc_ht=scontent.fsgn3-1.fna&oh=f1fa74f329078c9dff5634616a883cb7&oe=61569E70',
                describe: 'Sau một ngày làm việc căng thẳng, về nhà và thay một bộ đồ xinh xắn có thể làm giải tỏa mọi mệt mỏi, muộn phiền đó ạ. Không tin bạn thử mà xem',
                content: 'Cùng hòa nhịp con tim với hot trend set bộ lửng bò sữa của Quần áo thêu đẹp ngay nha, Đồ bộ bò sữa rất đẹp mát mặc ở nhà hay dạo phố đều rất hợp lý luôn ạ!',
                price: '140000',
                percentDiscount: 0,
                follow: false,
                note: false,
                bin: false,
                active: true,
                dateCreate: '27-9-2021 lúc 6:37',
                dateModified: '27-9-2021 lúc 6:37',
                userCreate: 'tan.hm',
                userModified: 'tan.hm'
            }, {
                _id: '123321123abc',
                code: 'LBS-1',
                name: 'SET BỘ LỬNG BÒ SỮA SIÊU YÊU ',
                view: 1,
                image: 'https://scontent.fsgn3-1.fna.fbcdn.net/v/t39.30808-6/p180x540/237144537_199268612258235_1694052261319163521_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=730e14&_nc_ohc=fa3MvbtAvtMAX-AAi4O&_nc_ht=scontent.fsgn3-1.fna&oh=f1fa74f329078c9dff5634616a883cb7&oe=61569E70',
                describe: 'Sau một ngày làm việc căng thẳng, về nhà và thay một bộ đồ xinh xắn có thể làm giải tỏa mọi mệt mỏi, muộn phiền đó ạ. Không tin bạn thử mà xem',
                content: 'Cùng hòa nhịp con tim với hot trend set bộ lửng bò sữa của Quần áo thêu đẹp ngay nha, Đồ bộ bò sữa rất đẹp mát mặc ở nhà hay dạo phố đều rất hợp lý luôn ạ!',
                price: '140000',
                percentDiscount: 0,
                follow: false,
                note: false,
                bin: false,
                active: true,
                dateCreate: '27-9-2021 lúc 6:37',
                dateModified: '27-9-2021 lúc 6:37',
                userCreate: 'tan.hm',
                userModified: 'tan.hm'
            }],
            listData: {
                tabMain: [{
                    label: 'Tất cả sản phẩm',
                    name: 'index'
                }, {
                    label: 'Theo dõi',
                    name: 'follow'
                }, {
                    label: 'Chú ý',
                    name: 'note'
                }, {
                    label: 'Thùng rác',
                    name: 'bin'
                }, ],
                optionsActive: [{
                    label: 'Thùng rác',
                    value: 'bin'
                }, {
                    label: 'Theo dõi',
                    value: 'follow'
                }, {
                    label: 'Khôi phục',
                    value: 'restore'
                }, {
                    label: 'Xoá vĩnh viễn',
                    value: 'delete'
                }],
                optionsCategoryProduct: [{
                    label: 'Quần dài',
                    value: '1'
                }, {
                    label: 'Áo thun',
                    value: '2'
                }, {
                    label: 'Quần đen',
                    value: '3'
                }, {
                    label: 'Quần đẹp',
                    value: '4'
                }]
            },
            productForm: {
                code: '',
                name: '',
                view: 1,
                image: '',
                describe: '',
                percentDiscount: 0,
                content: '',
                price: '',
                active: true,
                category: []
            },
            productValidate: {
                code: [{
                    max: 10,
                    message: 'Nhập quá số ký tự cho phép',
                    trigger: 'change'
                }],
                name: [{
                        max: 200,
                        message: 'Nhập quá số ký tự cho phép',
                        trigger: 'change'
                    },
                    {
                        required: true,
                        message: 'Tên sản phẩm là bắt buộc',
                        trigger: 'change'
                    },
                ],
                price: [{
                    pattern: /[0-9]/,
                    message: 'Vui lòng nhập đúng giá tiền',
                    trigger: 'change'
                }],
                percentDiscount: [{
                    max: 3,
                    min: 0,
                    message: 'Nhập quá số ký tự cho phép',
                    trigger: 'change'
                }],
                describe: [{
                    max: 500,
                    message: 'Nhập quá số ký tự cho phép',
                    trigger: 'change'
                }],
                content: [{

                }]
            },
            namePage: "Quản lý sản phẩm",
            activeMain: 'index',
            valueActive: '',
            dialogCreateProduct: false,
            moneySum: '0 VNĐ',
            isTimesBtnImage: false
        }
    },
    mounted() {

    },
    methods: {
        changeMoney(price) {
            let that = this;
            that.money = price;

        },
        remoteImage(productForm) {

            let that = this;
            that.isTimesBtnImage = false;

            const preview = document.getElementById('uploadImage');

            preview.src = 'images/common/noimage.png';

            that.productForm.image = null;

        },
        uploadImage() {

            let that = this;
            that.isTimesBtnImage = true;

            const preview = document.getElementById('uploadImage');
            const file = document.querySelector('input[type=file]').files[0];
            const reader = new FileReader();

            reader.addEventListener("load", function () {
                // convert image file to base64 string
                preview.src = reader.result;
            }, false);

            if (file) {
                reader.readAsDataURL(file);
            }
        },
        clickCreateProduct() {
            let that = this;
            that.dialogCreateProduct = true;
            that.title = "Thêm sản phẩm mới";
        },
        createProduct(productForm) {
            let that = this;
            that.$refs[productForm].validate((valid) => {
                if (valid) {
                    console.log(that.productForm);
                    this.$notify({
                        title: 'Thành công',
                        message: 'Thêm sản phẩm [' + that.productForm.name + '] thành công!',
                        type: 'success'
                    });
                    this.resetProductForm(productForm);
                    this.clearCommon();
                } else {
                    console.log('error submit!!');
                    return false;
                }
            });
        },
        resetProductForm(productForm) {
            this.$refs[productForm].resetFields();
        },
        clearCommon() {
            let that = this;
            that.isTimesBtnImage = false;
            that.dialogCreateProduct = false;
        }
    }
};
var Ctor = Vue.extend(Main)
new Ctor().$mount('#app')